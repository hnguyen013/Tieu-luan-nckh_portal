{% extends "portal/admin_base.html" %}

{% block title %}{{ title }}{% endblock %}
{% block menu_students_active %} active{% endblock %}
{% block page_header %}{{ title }}{% endblock %}
{% block breadcrumb %}Trang chủ / Sinh viên / {{ title }}{% endblock %}

{% block content %}
    <form method="post" enctype="multipart/form-data" class="form-vertical">
        {% csrf_token %}

        {% if form.non_field_errors %}
            <div class="form-errors">
                {{ form.non_field_errors }}
            </div>
        {% endif %}

        {% for field in form %}
            <div class="form-group">
                <label for="{{ field.id_for_label }}">{{ field.label }}</label>

                {# Xử lý riêng avatar nếu muốn thêm preview #}
                {% if field.name == "avatar" %}
                    {% if form.instance.pk and form.instance.avatar %}
                        <div class="avatar-preview" style="margin-bottom: 6px;">
                            <img src="{{ form.instance.avatar.url }}" alt="Avatar sinh viên"
                                 style="width:80px;height:80px;object-fit:cover;border-radius:4px;border:1px solid #ddd;">
                        </div>
                    {% endif %}
                {% endif %}

                {{ field }}

                {% if field.help_text %}
                    <div class="field-help">{{ field.help_text }}</div>
                {% endif %}

                {% if field.errors %}
                    <div class="field-error">{{ field.errors|striptags }}</div>
                {% endif %}
            </div>
        {% endfor %}

        <button type="submit" class="btn-primary">{{ submit_label }}</button>
        <a href="{% url 'portal:admin-student-list' %}" class="btn-secondary">Hủy</a>
    </form>
{% endblock %}
